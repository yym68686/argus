@import "tailwindcss";
@config "../../tailwind.config.ts";

@layer base {
  :root {
    --background: 99% 0.004 250;
    --foreground: 22% 0.02 250;
    --card: 100% 0.004 250;
    --card-foreground: 22% 0.02 250;
    --popover: 100% 0.004 250;
    --popover-foreground: 22% 0.02 250;
    --primary: 60% 0.18 245;
    --primary-foreground: 12% 0.02 250;
    --secondary: 96% 0.01 250;
    --secondary-foreground: 22% 0.02 250;
    --muted: 96% 0.01 250;
    --muted-foreground: 46% 0.02 250;
    --accent: 96% 0.01 250;
    --accent-foreground: 22% 0.02 250;
    --destructive: 62% 0.22 25;
    --destructive-foreground: 98% 0.01 20;
    --border: 90% 0.01 250;
    --input: 90% 0.01 250;
    --ring: 60% 0.18 245;
    --success: 64% 0.16 150;
    --warning: 72% 0.17 80;
    --font-press-start: "Press Start 2P";

    --argus-vt-x: 50vw;
    --argus-vt-y: 20vh;
    --argus-vt-duration: 1.1s;
    --argus-expo-out: linear(
      0 0%,
      0.1684 2.66%,
      0.3165 5.49%,
      0.446 8.52%,
      0.5581 11.78%,
      0.6535 15.29%,
      0.7341 19.11%,
      0.8011 23.3%,
      0.8557 27.93%,
      0.8962 32.68%,
      0.9283 38.01%,
      0.9529 44.08%,
      0.9711 51.14%,
      0.9833 59.06%,
      0.9915 68.74%,
      1 100%
    );
  }

  .dark {
    --background: 18% 0.015 250;
    --foreground: 95% 0.01 240;
    --card: 20% 0.018 250;
    --card-foreground: 95% 0.01 240;
    --popover: 20% 0.018 250;
    --popover-foreground: 95% 0.01 240;
    --primary: 70% 0.2 245;
    --primary-foreground: 14% 0.02 250;
    --secondary: 26% 0.02 250;
    --secondary-foreground: 95% 0.01 240;
    --muted: 26% 0.02 250;
    --muted-foreground: 78% 0.015 245;
    --accent: 26% 0.02 250;
    --accent-foreground: 95% 0.01 240;
    --destructive: 62% 0.22 25;
    --destructive-foreground: 95% 0.01 240;
    --border: 30% 0.02 250;
    --input: 30% 0.02 250;
    --ring: 70% 0.2 245;
    --success: 72% 0.18 150;
    --warning: 78% 0.18 80;
  }

  * {
    border-color: oklch(var(--border));
  }

  html {
    color-scheme: light;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    background: oklch(var(--background));
    color: oklch(var(--foreground));
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  @property --argus-vt-r {
    syntax: "<length>";
    inherits: true;
    initial-value: 0px;
  }

  ::view-transition-group(root) {
    animation-timing-function: var(--argus-expo-out);
  }

  ::view-transition-new(root) {
    --argus-vt-r: 0px;
    -webkit-mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><defs><filter id="blur"><feGaussianBlur stdDeviation="2"/></filter></defs><circle cx="20" cy="20" r="18" fill="white" filter="url(%23blur)"/></svg>');
    mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><defs><filter id="blur"><feGaussianBlur stdDeviation="2"/></filter></defs><circle cx="20" cy="20" r="18" fill="white" filter="url(%23blur)"/></svg>');
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-size: calc(2 * var(--argus-vt-r)) calc(2 * var(--argus-vt-r));
    mask-size: calc(2 * var(--argus-vt-r)) calc(2 * var(--argus-vt-r));
    -webkit-mask-position: calc(var(--argus-vt-x) - var(--argus-vt-r))
      calc(var(--argus-vt-y) - var(--argus-vt-r));
    mask-position: calc(var(--argus-vt-x) - var(--argus-vt-r))
      calc(var(--argus-vt-y) - var(--argus-vt-r));
    animation: argus-vt-scale var(--argus-vt-duration) both;
  }

  html[data-argus-vt-mask="circle"]::view-transition-new(root) {
    -webkit-mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle cx="20" cy="20" r="20" fill="white"/></svg>');
    mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle cx="20" cy="20" r="20" fill="white"/></svg>');
  }

  ::view-transition-old(root),
  html.dark::view-transition-old(root) {
    animation: none;
    animation-fill-mode: both;
    z-index: -1;
  }

  @keyframes argus-vt-scale {
    to {
      --argus-vt-r: 200vmax;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    ::view-transition-group(root) {
      animation: none;
    }
    ::view-transition-new(root) {
      animation: none;
      -webkit-mask: none;
      mask: none;
    }
    ::view-transition-old(root),
    html.dark::view-transition-old(root) {
      animation: none;
    }
  }
}

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  @keyframes argus-blob-float-a {
    0% {
      transform: translate3d(-6%, -2%, 0) rotate(0deg);
      opacity: 0.55;
    }
    50% {
      transform: translate3d(4%, -6%, 0) rotate(1deg);
      opacity: 0.75;
    }
    100% {
      transform: translate3d(-6%, -2%, 0) rotate(0deg);
      opacity: 0.55;
    }
  }

  @keyframes argus-blob-float-b {
    0% {
      transform: translate3d(8%, 4%, 0) rotate(0deg);
      opacity: 0.45;
    }
    50% {
      transform: translate3d(0%, -5%, 0) rotate(-1deg);
      opacity: 0.62;
    }
    100% {
      transform: translate3d(8%, 4%, 0) rotate(0deg);
      opacity: 0.45;
    }
  }

  @keyframes argus-blob-pulse {
    0%,
    100% {
      opacity: 0.22;
      transform: translate3d(0, 0, 0) scale(1);
    }
    50% {
      opacity: 0.34;
      transform: translate3d(0, -2%, 0) scale(1.02);
    }
  }

  @keyframes argus-noise-drift {
    0%,
    100% {
      transform: translate3d(0, 0, 0);
    }
    50% {
      transform: translate3d(-1%, 0.5%, 0);
    }
  }

  @keyframes argus-grid-drift {
    0% {
      transform: translateY(0);
      opacity: 0.55;
    }
    50% {
      transform: translateY(-10px);
      opacity: 0.7;
    }
    100% {
      transform: translateY(0);
      opacity: 0.55;
    }
  }

  .argus-landing-canvas {
    background-image:
      radial-gradient(
        ellipse at top,
        oklch(var(--card) / 0.45) 0%,
        oklch(var(--background) / 1) 52%,
        oklch(var(--background) / 1) 100%
      );
  }

  .argus-landing-grid-64 {
    background-image:
      linear-gradient(oklch(var(--foreground) / 0.04) 1px, transparent 1px),
      linear-gradient(90deg, oklch(var(--foreground) / 0.04) 1px, transparent 1px);
    background-size: 64px 64px;
    mask-image: radial-gradient(closest-side, black 58%, transparent 100%);
    animation: argus-grid-drift 12s ease-in-out infinite;
  }

  .argus-landing-noise {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.20'/%3E%3C/svg%3E");
    background-size: 260px 260px;
    mix-blend-mode: overlay;
    opacity: 0.14;
    animation: argus-noise-drift 9.5s linear infinite;
    will-change: transform;
  }

  .argus-landing-blob {
    will-change: transform, opacity;
  }

  @media (min-width: 40rem) and (pointer: fine) {
    .argus-landing-blob {
      filter: blur(110px);
    }
  }

  @media (min-width: 64rem) and (pointer: fine) {
    .argus-landing-blob {
      filter: blur(140px);
    }
  }

  @media (max-width: 40rem) {
    .argus-landing-noise {
      animation: none;
    }
  }

  .argus-landing-blob-a {
    background-image: radial-gradient(
      circle at 30% 30%,
      oklch(var(--primary) / 0.30),
      transparent 62%
    );
    animation: argus-blob-float-a 10s ease-in-out infinite;
  }

  .argus-landing-blob-b {
    background-image: radial-gradient(
      circle at 60% 45%,
      oklch(var(--primary) / 0.22),
      transparent 64%
    );
    animation: argus-blob-float-b 12s ease-in-out infinite;
  }

  .argus-landing-blob-c {
    background-image: radial-gradient(
      circle at 50% 50%,
      oklch(var(--primary) / 0.18),
      transparent 60%
    );
    animation: argus-blob-pulse 9s ease-in-out infinite;
  }
}

